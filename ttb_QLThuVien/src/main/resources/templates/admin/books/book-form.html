<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${book.id == null} ? 'Thêm sách mới' : 'Chỉnh sửa sách'"></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2 th:text="${book.id == null} ? 'Thêm sách mới' : 'Chỉnh sửa sách'"></h2>

    <form th:action="@{/books/save}" th:object="${book}" method="post" enctype="multipart/form-data">
        <input type="hidden" th:field="*{id}"/>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label>Tên sách</label>
                <input type="text" th:field="*{tenSach}" class="form-control" required>
            </div>
            <div class="col-md-6 mb-3">
                <label>ISBN</label>
                <input type="text" th:field="*{maIsbn}" class="form-control">
            </div>
        </div>
        <div class="mb-3">
            <label>Mô tả</label>
            <textarea th:field="*{moTa}" class="form-control" rows="3"></textarea>
        </div>
        <div class="row">
            <div class="col-md-4 mb-3">
                <label>Năm xuất bản</label>
                <input type="number" th:field="*{namXuatBan}" class="form-control">
            </div>
            <div class="col-md-4 mb-3">
                <label>Nhà xuất bản</label>
                <input type="text" th:field="*{nhaXuatBan}" class="form-control">
            </div>
            <div class="col-md-4 mb-3">
                <label>Số trang</label>
                <input type="number" th:field="*{soTrang}" class="form-control">
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 mb-3">
                <label>Ngôn ngữ</label>
                <input type="text" th:field="*{ngonNgu}" class="form-control" placeholder="Tiếng Việt">
            </div>
            <div class="col-md-4 mb-3">
                <label>Số lượng</label>
                <input type="number" th:field="*{soLuong}" class="form-control" min="1">
            </div>
            <div class="col-md-4 mb-3">
                <label>Trạng thái</label>
                <select th:field="*{trangThai}" class="form-select">
                    <option value="Con_Hang">Còn hàng</option>
                    <option value="Het_Hang">Hết hàng</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 mb-3">
                <label>Tác giả</label>
                <select th:field="*{author.id}" class="form-select" required>
                    <option th:each="author : ${authors}" th:value="${author.id}" th:text="${author.tenTacGia}"></option>
                </select>
            </div>
            <div class="col-md-6 mb-3">
                <label>Thể loại</label>
                <select th:field="*{category.id}" class="form-select" required>
                    <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.name}"></option>
                </select>
            </div>
        </div>
        <div class="mb-3">
            <label>Ảnh bìa</label>
            <input type="file" th:field="*{anhBia}" class="form-control">
            <div th:if="${book.anhBia != null}" class="mt-2">
                <img th:src="@{${book.anhBia}}" style="width:120px; height:auto; border-radius:4px;" />
            </div>
        </div>
        <button type="submit" class="btn btn-success">Lưu</button>
        <a th:href="@{/books}" class="btn btn-secondary">Hủy</a>
    </form>
</div>
</body>
</html>
